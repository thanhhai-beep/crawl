(function(t){function s(s){for(var a,o,r=s[0],c=s[1],l=s[2],u=0,p=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(s);while(p.length)p.shift()();return e.push.apply(e,l||[]),i()}function i(){for(var t,s=0;s<e.length;s++){for(var i=e[s],a=!0,r=1;r<i.length;r++){var c=i[r];0!==n[c]&&(a=!1)}a&&(e.splice(s--,1),t=o(o.s=i[0]))}return t}var a={},n={app:0},e=[];function o(s){if(a[s])return a[s].exports;var i=a[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=a,o.d=function(t,s,i){o.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,s){if(1&s&&(t=o(t)),8&s)return t;if(4&s&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var a in t)o.d(i,a,function(s){return t[s]}.bind(null,a));return i},o.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(s,"a",s),s},o.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=s,r=r.slice();for(var l=0;l<r.length;l++)s(r[l]);var d=c;e.push([0,"chunk-vendors"]),i()})({0:function(t,s,i){t.exports=i("56d7")},"56d7":function(t,s,i){"use strict";i.r(s);i("4de4"),i("b680"),i("d3b7"),i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),n=function(){var t=this,s=t.$createElement,i=t._self._c||s;return t.recoList?i("div",{staticClass:"area"},[t._m(0),i("Star",{attrs:{itData:t.starInfo}}),i("div",{staticClass:"comment-btn"},[i("a",{staticClass:"fl",on:{click:t.popdown}},[i("i",{staticClass:"it1"}),t._v("我要安利")]),i("a",{staticClass:"fr",on:{click:t.popdown}},[i("i",{staticClass:"it2"}),t._v("我要评价")])]),i("div",{staticClass:"comment-list"},t._l(t.commitList,(function(t,s){return i("Citem",{key:t.id,attrs:{itData:t,isReco:!0}})})),1),0==t.commitList.length?i("div",[i("div",{staticClass:"comment-nodata"},[t._v(" 这里欠缺一位像你这样勇于发言的人 "),i("br"),i("a",{on:{click:t.popdown}},[t._v("现在去发言")])])]):t._e(),t.recoList.count>0?i("div",{staticClass:"show-comment"},[i("span",{on:{click:t.toList}},[t._v("查看全部"),i("i",[t._v(t._s(t._f("numFormat")(t.recoList.count)))]),t._v("评价")])]):t._e()],1):t._e()},e=[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"areaHead"},[i("div",{staticClass:"it"},[t._v("玩家评价")])])}],o=i("5530"),r=i("bc3a"),c=i.n(r),l=(i("c975"),i("d4ec")),d=function t(){Object(l["a"])(this,t),"undefined"!=typeof window&&(this.href=location.href,this.testReg=/\/\/t.m.3839/i,this.otReg=/ot/i,this.isLocal=this.href.indexOf("localhost")>-1||this.href.indexOf("192.168")>-1,this.isTest=this.testReg.test(this.href),this.isOt=this.otReg.test(this.href),this.isOnline=!this.isTest&&!this.isOt)},u=new d;function p(){return"/"}var m=c.a.create({baseURL:p(),timeout:2e4,headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}});function _(t){return t}function f(t){return t.data}function v(t){return Promise.reject(t)}function h(t,s){return m.get(t,{params:s})}function w(t,s){var i=new FormData;for(var a in s)i.append(a,s[a]);return m.post(t,i)}m.interceptors.request.use(_),m.interceptors.response.use(f,v);var C={instance:m,get:h,post:w},y={getComment:function(t){return C.get("app/comment.php",Object(o["a"])({m:"comment",ac:"get_comment_list",v:"1.0"},t))}};i("99af"),i("a9e3"),i("4d63"),i("ac1f"),i("25f0"),i("466d"),i("5319");function g(t){var s=Number(100*t).toFixed(1);return s+="%",s}function D(t,s,i){var a="";a=u.isTest?"//t.m.3839.com/review/":"//m.3839.com/review/";var n=window.sem_qd_info,e=n.sem_qd,o=n.sem_version,r=n.apk_version,c=n.channel_id,l="";void 0===e&&void 0===r||(l=""!=c?"&sem_qd=".concat(e,"&sem_version=").concat(o,"&apk_vserion=").concat(r,"&channel_id=").concat(c):"&sem_qd=".concat(e,"&sem_version=").concat(o,"&apk_vserion=").concat(r)),window.open(a+"?pid="+t+"&fid="+s+"&cid="+i+l)}function L(){return document.body.clientWidth/750*42}function b(t,s){return!!t.className.match(new RegExp("(\\s|^)"+s+"(\\s|$)"))}function T(t,s){b(t,s)||(t.className+=" "+s)}function k(t,s){b(t,s)&&(t.className=t.className.replace(new RegExp("(\\s|^)"+s+"(\\s|$)")," "))}function x(t){for(var s=[],i=t.parentNode.children,a=0;a<i.length;a++)i[a]!==t&&s.push(i[a]);return s}function I(t){var s=3600,i=60;if(t>=s){var a=parseInt(t/s),n=parseInt((t-a*s)/i);return a+"小时"+(0==n?"":n+"分钟")}if(t>=i){var e=parseInt(t/i),o=t-e*i;return e+"分钟"+(0==o?"":o+"秒")}return t+"秒"}function S(t,s){for(var i=0,a=t.length,n="",e=0;e<a;e++){var o=t.charAt(e);if(i++,escape(o).length>4&&i++,n=n.concat(o),i>=s)return n=n.concat(""),n}if(i<s)return t}var O={ToolPercent:g,toView:D,getComLineHeight:L,addClass:T,removeClass:k,hasClass:b,siblings:x,playTime:I,cutstr:S},j=function(){var t=this,s=t.$createElement,i=t._self._c||s;return t.itData?i("div",{staticClass:"comment-vote"},[t.itData.star>0?i("div",{staticClass:"vote-info cf"},[i("div",{staticClass:"score"},[i("em",{staticClass:"value"},[t._v(t._s(t.itData.star)),i("sup",[t._v("®")])]),i("div",{staticClass:"starbar"},[i("span",{style:{width:t.starbar(t.itData.star/10)}})])]),i("div",{staticClass:"detail"},[i("ul",{staticClass:"mod-ul"},[i("li",{staticClass:"mod-li"},[i("em",[t._v("5星")]),i("div",{staticClass:"rating-bar"},[i("span",{style:{width:t.starbar(t.itData.star_usernum_5/t.itData.star_usernum)}})])]),i("li",{staticClass:"mod-li"},[i("em",[t._v("4星")]),i("div",{staticClass:"rating-bar"},[i("span",{style:{width:t.starbar(t.itData.star_usernum_4/t.itData.star_usernum)}})])]),i("li",{staticClass:"mod-li"},[i("em",[t._v("3星")]),i("div",{staticClass:"rating-bar"},[i("span",{style:{width:t.starbar(t.itData.star_usernum_3/t.itData.star_usernum)}})])]),i("li",{staticClass:"mod-li"},[i("em",[t._v("2星")]),i("div",{staticClass:"rating-bar"},[i("span",{style:{width:t.starbar(t.itData.star_usernum_2/t.itData.star_usernum)}})])]),i("li",{staticClass:"mod-li"},[i("em",[t._v("1星")]),i("div",{staticClass:"rating-bar"},[i("span",{style:{width:t.starbar(t.itData.star_usernum_1/t.itData.star_usernum)}})])])]),t.itData.count>0?[t.isInner?i("p",{staticClass:"total inner"},[i("a",{},[t._v(t._s(t._f("numFormat")(t.itData.count))+"人评价")])]):i("p",{staticClass:"total"},[i("a",{on:{click:t.toList}},[t._v(t._s(t._f("numFormat")(t.itData.count))+"人评价")])])]:t._e()],2)]):t._e(),0==t.itData.star?i("div",{staticClass:"vote-none"},[t._v("还没收集到足够评分，无法给出公正的评分")]):i("div",{staticClass:"vote-new"},[t._v(" 最新玩家评分"),i("span",[t._v(t._s(t.itData.recent_user_star>0?t.itData.recent_user_star:"暂无"))]),t._v(" / 近7天评分"),i("span",[t._v(t._s(t.itData.recent_day_star>0?t.itData.recent_day_star:"暂无"))])])]):t._e()},N=[],P={name:"Cstar",props:{score:Number,itData:Object,isInner:{type:Boolean,default:!1}},methods:{starbar:function(t){return O.ToolPercent(t)},popdown:function(){window.comInit.downTips()},toList:function(){window.pjPanel&&window.pjPanel()}}},E=P,F=i("2877"),$=Object(F["a"])(E,j,N,!1,null,null,null),A=$.exports,B=function(){var t=this,s=t.$createElement,i=t._self._c||s;return t.itData?i("div",{staticClass:"comment-item"},[t.itData.fold_info&&0!=t.itData.fold_info.fold_status?i("div",{staticClass:"comment-fold"},[i("span",{on:{click:function(s){return t.showFold()}}},[t._v("该评价已被折叠")])]):i("div",[i("div",{staticClass:"item-head"},[i("div",{staticClass:"uimg"},[i("img",{attrs:{src:t.itData.user.avatar,alt:t.itData.user.nickname}})]),i("div",{staticClass:"uinfo"},[i("div",{staticClass:"it-name"},[i("em",{staticClass:"name"},[t._v(t._s(t.itData.user.nickname))]),1==t.itData.user.identity_icon?i("span",{staticClass:"up"},[t._v("开发者")]):3==t.itData.user.identity_icon?i("span",{staticClass:"up"},[t._v("推主")]):7==t.itData.user.identity_icon?i("span",{staticClass:"auth1"},[t._v(t._s(t.itData.user.identity_info))]):2==t.itData.user.identity_icon?i("span",{staticClass:"auth2"},[t._v(t._s(t.itData.user.identity_info))]):t._e()]),i("div",{staticClass:"it-time"},[i("span",{class:{edit:t.itData.edittime>0}},[t._v(t._s(t.itData.edittime>0?"修改于":"")+" "+t._s(t.itData.time_str)+" ")])])])]),i("div",{staticClass:"item-score"},[i("div",{staticClass:"starbar"},[i("span",{style:{width:t.starbar(t.itData.star/5)}})]),4==t.itData.pub_game_status?i("span",{staticClass:"sp"},[t._v("期待值")]):t._e(),1==t.itData.is_pay?i("span",{staticClass:"sp"},[t._v("已购买")]):t._e(),t.itData.play_time?i("span",{staticClass:"sp"},[t._v("游戏时长 "+t._s(t.itData.play_time_str))]):t._e()]),t.itData.fold_info&&0==t.itData.fold_info.fold_status?i("div",{staticClass:"item-fold"},[t._v(" 折叠原因："+t._s(t.itData.fold_info.fold_reason)+" "),i("a",{attrs:{href:t.rulelink(t.itData.fold_info.interface_info.interface_id)}},[t._v("（规则说明）")])]):t._e(),i("div",{staticClass:"item-text"},[i("div",{ref:"comtxt",staticClass:"txt",on:{click:function(s){return t.toView(t.itData.pid,t.itData.fid,t.itData.id)}}},[t.itData.user.user_tag&&t.itData.user.user_tag.icon_comment?i("img",{staticClass:"tag-bao",attrs:{src:t.itData.user.user_tag.icon_comment,alt:""}}):t._e(),i("span",{domProps:{innerHTML:t._s(t.txtFilter(t.itData.content))}})]),i("span",{ref:"showall",staticClass:"btn",on:{click:t.overShow}},[t._v("更多")])]),i("div",{staticClass:"item-info"},[i("span",{staticClass:"c-device"},[t._v(" "+t._s(t.itData.user_agent)+" "+t._s(t.itData.location?" • "+t.itData.location:"")+" ")]),i("span",{on:{click:t.toReport}},[t._v("举报")]),i("div",{staticClass:"fr"},[i("span",{staticClass:"c-good",on:{click:t.popdown}},[t._v(t._s(t.itData.good>0?t.itData.good:""))]),i("span",{staticClass:"c-reply",on:{click:function(s){return t.toView(t.itData.pid,t.itData.fid,t.itData.id)}}},[t._v(" 回复 "),t.itData.posts>0?i("i",[t._v("("+t._s(t._f("numFormat")(t.itData.posts))+")")]):t._e()])])]),t.replyFilter(t.itData.reply_list).length>0&&!t.isReco?i("div",{staticClass:"reply-it"},[i("ul",t._l(t.replyFilter(t.itData.reply_list),(function(s,a){return i("li",{key:a},[i("span",{staticClass:"name"},[i("em",{class:{auth2:"2"==s.user.identity_icon,auth1:"7"==s.user.identity_icon}},[t._v(" "+t._s(s.user.nickname)+" ")]),s.to_user?i("span",[t._v(" 回复 "),i("em",{class:{auth2:"2"==s.to_user.identity_icon,auth1:"7"==s.to_user.identity_icon}},[t._v(" "+t._s(s.to_user.nickname)+" ")])]):t._e(),t._v("： ")]),i("span",{staticClass:"text",domProps:{innerHTML:t._s(t.txtFilter(s.content))}})])})),0),i("a",{staticClass:"reply-show",attrs:{href:"#"},on:{click:function(s){return t.toView(t.itData.pid,t.itData.fid,t.itData.id)}}},[t._v("查看全部"+t._s(t.itData.posts)+"条回复")])]):t._e()])]):t._e()},H=[],R=(i("1276"),{name:"Cstar",props:{itData:Object,isReco:{type:Boolean,default:!1}},mounted:function(){var t=this;this.$nextTick((function(){t.setOver()}))},methods:{txtFilter:function(t){return t.replace(/(<\/?a.*?>)/g,"")},replyFilter:function(t){return t.filter((function(t){return t.state>0}))},rulelink:function(t){return"https://m.bbs.3839.com/thread-"+t+".htm"},starbar:function(t){return O.ToolPercent(t)},showFold:function(){var t=this;this.itData.fold_info.fold_status=0,this.$nextTick((function(){t.setOver()}))},setOver:function(){var t=this.$refs.comtxt;if(t){var s=O.getComLineHeight();t.offsetHeight>4*s&&(O.addClass(t,"over"),t.nextElementSibling.style.display="block")}},popdown:function(){window.comInit.downTips()},overShow:function(t){var s=t.target,i=O.siblings(t.target)[0];O.hasClass(i,"over")?(O.removeClass(i,"over"),s.innerHTML="收起"):(O.addClass(i,"over"),s.innerHTML="更多")},toView:function(t,s,i){O.toView(t,s,i)},toReport:function(){var t=item_title||"快爆",s=this.itData,i=s.content,a=s.user,n=s.id;switch(i.length>180&&(i=O.cutstr(i,180)),pid){case 1:window.location.href="//m.3839.com/report/?type=6&id=".concat(n,"&title=").concat(t,"&uimg=").concat(a.avatar.split("?")[0],"&uname=").concat(a.nickname,"&desc=").concat(i);break;case 2:window.location.href="//m.3839.com/report/?type=7&id=".concat(n,"&title=").concat(t,"&uimg=").concat(a.avatar.split("?")[0],"&uname=").concat(a.nickname,"&desc=").concat(i);break;default:this.popdown();break}}}}),V=R,M=Object(F["a"])(V,B,H,!1,null,null,null),U=M.exports,q={data:function(){return{pid:window.pid,fid:window.fid,limit:3,isAnli:1,recoList:null,commitList:[],starInfo:null,Count:0,isNone:!1}},components:{Star:A,Citem:U},mounted:function(){this.getData()},methods:{getData:function(){var t=this;y.getComment({get_recommend:this.isAnli,limit:this.limit,fid:this.fid,pid:this.pid}).then((function(s){if(100==s.code){t.recoList=s.result.data,t.starInfo=s.result.star_info;var i=s.result.data.list;t.commitList=i.filter((function(t){return t.state>0})),window.comInit.comTotal(t.starInfo),s.result.recommend&&t.$root.BUS.$emit("anli",s.result.recommend),s.result.data.hasOwnProperty("count")&&(0==s.result.data.count?t.isNone=!0:t.Count=s.result.data.count),console.log()}}))},popdown:function(){window.comInit.downTips()},starbar:function(t){return O.ToolPercent(t)},toView:function(t,s,i){O.toView(t,s,i)},showFold:function(t){this.recoList.list[t].fold_info.fold_status=0},toList:function(){window.pjPanel&&window.pjPanel()},rulelink:function(t){return"https://m.bbs.3839.com/thread-"+t+".htm"}}},W=q,J=Object(F["a"])(W,n,e,!1,null,null,null),z=J.exports,G=function(){var t=this,s=t.$createElement,i=t._self._c||s;return t.listAnli?i("div",[i("div",{staticClass:"titHd"},[i("em",[t._v("安利理由")]),i("div",{staticClass:"anli-tip"},[t._v("（ 写安利，争当推主 "),i("a",{on:{click:t.popdown}},[i("i")]),t._v("）")])]),i("ul",{staticClass:"anli-list"},t._l(t.listAnli,(function(s,a){return i("li",{key:a},[i("div",{staticClass:"uinfo"},[3==s.user.identity_icon?i("div",{staticClass:"tui"},[t._v("推主")]):t._e(),i("div",{staticClass:"uimg"},[i("img",{attrs:{src:s.user.avatar,alt:s.user.nickname}})]),i("div",{staticClass:"uname"},[i("em",[t._v(t._s(s.user.nickname))]),i("p",[t._v("TA已安利 "+t._s(s.recommend_count)+" 款游戏")])]),i("a",{staticClass:"follow",on:{click:t.popdown}},[t._v("+关注TA")])]),i("div",{staticClass:"score"},[i("div",{staticClass:"starbar"},[i("span",{style:{width:t.starbar(s.star)}})])]),i("div",{staticClass:"text",on:{click:function(i){return t.toView(s.pid,s.fid,s.id)}}},["老爆er"==s.user.user_tag.title?i("img",{staticClass:"baoer",attrs:{src:s.user.user_tag.icon_comment,alt:"老爆er"}}):t._e(),i("span",{domProps:{innerHTML:t._s(s.content)}})]),i("div",{staticClass:"info"},[i("span",{staticClass:"date",class:{edit:s.edittime>0}},[t._v(t._s(s.edittime>0?"修改于":"")+" "+t._s(s.time_str)+" ")]),i("div",{staticClass:"fr"},[0==s.good?i("span",{staticClass:"good",on:{click:t.popdown}}):i("span",{staticClass:"good",on:{click:t.popdown}},[t._v(t._s(t._f("numFormat")(s.good)))]),i("span",{staticClass:"reply",on:{click:function(i){return t.toView(s.pid,s.fid,s.id)}}},[t._v("回复"),s.posts>0?i("i",[t._v("("+t._s(s.posts)+")")]):t._e()])])])])})),0),i("div",{staticClass:"anli-foot"},[t.listcount?i("span",{staticClass:"sp1 fl",on:{click:t.popdown}},[t._v("共有"),i("i",[t._v(t._s(t.listcount))]),t._v("人安利")]):t._e(),i("span",{staticClass:"sp2 fr",on:{click:t.popdown}},[t._v("我也要安利")])])]):t._e()},K=[],Q={data:function(){return{listAnli:null,listcount:null}},mounted:function(){var t=this;this.$root.BUS.$on("anli",(function(s){t.listAnli=s.list,t.listcount=s.count}))},methods:{starbar:function(t){return O.ToolPercent(t/5)},popdown:function(){window.comInit.downTips()},toView:function(t,s,i){O.toView(t,s,i)}}},X=Q,Y=Object(F["a"])(X,G,K,!1,null,null,null),Z=Y.exports,tt=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"area"},[2!=t.pid?[t._m(0),i("Star",{attrs:{itData:t.starInfo,isInner:!0}}),i("div",{staticClass:"comment-btn"},[i("a",{staticClass:"fl",on:{click:t.popdown}},[i("i",{staticClass:"it1"}),t._v(" 我要安利 ")]),i("a",{staticClass:"fr",on:{click:t.popdown}},[i("i",{staticClass:"it2"}),t._v(" 我要评价 ")])])]:t._e(),i("div",{staticClass:"areaHead"},[i("div",{staticClass:"it"},[t._v(" 玩家评价 "),t.Count>0?i("span",[t._v(" (共 "),i("i",[t._v(t._s(t._f("numFormat")(t.Count)))]),t._v(" 条评价) ")]):t._e()]),t.isNone?t._e():i("div",{staticClass:"comment-filter"},[i("span",{class:{on:"default"==t.sort},on:{click:function(s){return t.sortSel("default")}}},[t._v("默认")]),i("span",{staticClass:"new",class:{on:"new"==t.sort},on:{click:function(s){return t.sortSel("new")}}},[t._v("最新")]),2!=t.pid?i("span",{staticClass:"sort",class:{on:"all"!=t.listType},on:{click:t.sortShow}},[t._v("筛选")]):t._e(),t.showListType?i("div",{staticClass:"comment-filter-item"},[i("ul",t._l(t.listTypeList,(function(s,a){return i("li",{key:a,class:{on:s.it==t.listType},on:{click:function(i){return t.sortType(s.it)}}},[t._v(" "+t._s(s.val)+" ")])})),0)]):t._e()])]),t.isLoad||"all"!=t.listType||!t.isNone&&0!=t.comList.length?t._e():i("div",[i("div",{staticClass:"comment-nodata"},[t._v(" 这里欠缺一位像你这样勇于发言的人 "),i("br"),i("a",{on:{click:t.popdown}},[t._v("现在去发言")])])]),i("div",{staticClass:"comment-list"},t._l(t.comList,(function(t,s){return i("Citem",{key:t.id,attrs:{itData:t}})})),1),t.isLoad?i("div",{staticClass:"loadtips"},[i("span",{staticClass:"ico"}),i("span",[t._v("正在加载中...")])]):t._e(),t.loadBtn&&!t.isLoad?i("div",{staticClass:"comment-load",on:{click:t.getData}},[t._v(" 加载更多 "),i("span")]):t._e(),t.isLoadEnd&&t.comList.length>0?i("div",{staticClass:"loadtips"},[t._v(" 没有更多评论 ")]):t._e(),t.isLoadEnd&&0==t.comList.length&&"all"!=t.listType?i("div",{staticClass:"loadtips",staticStyle:{padding:"0.4rem 0"}},[t._v(" "+t._s(t.loadtxt)+" ")]):t._e(),i("a",{staticClass:"comment-fixed",on:{click:t.popdown}},[t._v("写评价")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showListType,expression:"showListType"}],staticClass:"comment-filter-mask",on:{click:t.sortShow}})],2)},st=[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"areaHead"},[i("div",{staticClass:"it"},[t._v("快爆评分")])])}],it=(i("7db0"),{data:function(){return{pid:window.pid,fid:window.fid,limit:20,isAnli:0,sort:"default",listType:"all",showListType:!1,lastId:0,cursor:0,isLoad:!0,isNone:!1,isUserHide:!1,listTypeList:[{it:"all",val:"全部评价"},{it:"star1",val:"1 ★"},{it:"star2",val:"2 ★"},{it:"star3",val:"3 ★"},{it:"star4",val:"4 ★"},{it:"star5",val:"5 ★"},{it:"play_time",val:"有游戏时长"}],Count:0,comList:[],starInfo:null,loadBtn:!1,noLoadData:!1,isLoadEnd:!1,isLoadNum:0}},components:{Star:A,Citem:U},computed:{loadtxt:function(){var t=this,s=this.listTypeList.find((function(s){return s.it==t.listType}));return"暂无"+s.val+"类型的数据"}},mounted:function(){this.getData()},methods:{setInit:function(){this.lastId=0,this.cursor=0,this.comList=[],this.loadBtn=!1,this.noLoadData=!1,this.isLoadEnd=!1,this.isLoadNum=0},getData:function(){var t=this;5!=this.isLoadNum?(this.isLoad=!0,y.getComment({get_recommend:this.isAnli,limit:this.limit,fid:this.fid,pid:this.pid,sort:this.sort,list_type:this.listType,last_id:this.lastId,cursor:this.cursor}).then((function(s){if(t.isLoad=!1,100==s.code){s.result.cursor>0||s.result.last_id>0?(t.cursor=s.result.cursor,t.lastId=s.result.last_id,t.loadBtn=!0):(t.loadBtn=!1,t.isLoadEnd=!0);var i=s.result.data.list.filter((function(t){return t.state>0}));i.length>0?(t.comList=t.comList.concat(i),t.isLoadNum++):t.isLoadEnd||t.getData(),s.result.star_info&&(t.starInfo=s.result.star_info),s.result.data.hasOwnProperty("count")&&(0==s.result.data.count&&0==s.result.data.list.length?t.isNone=!0:0==s.result.data.count&&s.result.data.list.length>0?t.isUserHide=!0:t.Count=s.result.data.count)}}))):this.popdown({type:1})},popdown:function(t){window.comInit.downTips(t)},sortShow:function(){this.showListType=!this.showListType},sortSel:function(t){this.sort!=t&&(this.sort=t,this.setInit(),this.getData())},sortType:function(t){this.listType!=t&&(this.listType=t,this.setInit(),this.getData()),this.sortShow()},demoLoad:function(){this.setInit(),this.getData()}}}),at=it,nt=Object(F["a"])(at,tt,st,!1,null,null,null),et=nt.exports,ot=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"area"},[i("div",{staticClass:"areaHead"},[i("div",{staticClass:"it"},[t._v(" 玩家评价 "),t.Count>0?i("span",[t._v(" (共 "),i("i",[t._v(t._s(t.Count))]),t._v("条评论) ")]):t._e()]),i("div",{staticClass:"comment-filter"},[i("span",{class:{on:"default"==t.sort},on:{click:function(s){return t.sortSel("default")}}},[t._v("默认")]),i("span",{staticClass:"new",class:{on:"new"==t.sort},on:{click:function(s){return t.sortSel("new")}}},[t._v("最新")]),i("span",{staticClass:"sort",class:{on:"all"!=t.listType},on:{click:t.sortShow}},[t._v("筛选")]),t.showListType?i("div",{staticClass:"comment-filter-item"},[i("ul",t._l(t.listTypeList,(function(s,a){return i("li",{key:a,class:{on:s.it==t.listType},on:{click:function(i){return t.sortType(s.it)}}},[t._v(t._s(s.val))])})),0)]):t._e()])]),t.isNone&&!t.isLoad&&"all"==t.listType?i("div",{staticClass:"comment-nodata"},[t._v(" 这里欠缺一位像你这样勇于发言的人 "),i("br"),i("a",[t._v("现在去发言")])]):t._e(),i("div",{staticClass:"comment-list"},t._l(t.comList,(function(t,s){return i("Citem",{key:s,attrs:{itData:t}})})),1),t.isLoad?i("div",{staticClass:"loadtips"},[i("span",{staticClass:"ico"}),i("span",[t._v("正在加载中...")])]):t._e(),t.loadBtn&&!t.isLoad?i("div",{staticClass:"comment-load",on:{click:t.getData}},[t._v(" 加载更多 "),i("span")]):t._e(),t.isLoadEnd&&t.comList.length>0?i("div",{staticClass:"loadtips"},[t._v("没有更多评论")]):t._e(),t.isLoadEnd&&0==t.comList.length&&"all"!=t.listType?i("div",{staticClass:"loadtips",staticStyle:{padding:".4rem 0"}},[t._v(t._s(t.loadtxt))]):t._e(),i("a",{staticClass:"comment-fixed",on:{click:t.popdown}},[t._v("写评价")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showListType,expression:"showListType"}],staticClass:"comment-filter-mask",on:{click:t.sortShow}})])},rt=[],ct={data:function(){return{pid:window.pid,fid:window.fid,score:0,limit:10,isAnli:0,sort:"default",listType:"all",showListType:!1,lastId:0,cursor:0,isLoad:!0,isNone:!1,listTypeList:[{it:"all",val:"全部评价"},{it:"star1",val:"1 ★"},{it:"star2",val:"2 ★"},{it:"star3",val:"3 ★"},{it:"star4",val:"4 ★"},{it:"star5",val:"5 ★"},{it:"play_time",val:"有游戏时长"}],Count:0,comList:[],starInfo:null,loadBtn:!1,noLoadData:!1,isLoadEnd:!1,isLoadNum:0}},components:{Star:A,Citem:U},computed:{loadtxt:function(){var t=this,s=this.listTypeList.find((function(s){return s.it==t.listType}));return"暂无 "+s.val+" 类型的数据"}},mounted:function(){this.score=parseFloat(window.fscore),this.getData()},methods:{setInit:function(){this.lastId=0,this.cursor=0,this.comList=[],this.loadBtn=!1,this.noLoadData=!1,this.isLoadEnd=!1,this.isLoadNum=0},getData:function(){var t=this;3!=this.isLoadNum?(this.isLoad=!0,y.getComment({get_recommend:this.isAnli,limit:this.limit,fid:this.fid,pid:this.pid,sort:this.sort,list_type:this.listType,last_id:this.lastId,cursor:this.cursor}).then((function(s){if(t.isLoadNum++,t.isLoad=!1,100==s.code){s.result.cursor>0||s.result.last_id>0?(t.cursor=s.result.cursor,t.lastId=s.result.last_id,t.loadBtn=!0):(t.loadBtn=!1,t.isLoadEnd=!0);var i=s.result.data.list.filter((function(t){return t.state>0}));i.length>0?(t.comList=t.comList.concat(i),t.isLoadNum++):t.isLoadEnd||t.getData(),s.result.star_info&&(t.starInfo=s.result.star_info),s.result.data.hasOwnProperty("count")&&(0==s.result.data.count&&0==s.result.data.list.length?t.isNone=!0:0==s.result.data.count&&s.result.data.list.length>0?t.isUserHide=!0:t.Count=s.result.data.count)}}))):this.popdown()},popdown:function(){window.comInit.downTips()},sortShow:function(){this.showListType=!this.showListType},sortSel:function(t){this.sort!=t&&(this.sort=t,this.setInit(),this.getData())},sortType:function(t){this.listType!=t&&(this.listType=t,this.setInit(),this.getData()),this.sortShow()},demoLoad:function(){this.setInit(),this.getData()}}},lt=ct,dt=Object(F["a"])(lt,ot,rt,!1,null,null,null),ut=dt.exports;a["a"].config.productionTip=!1;var pt=new a["a"];a["a"].prototype.$http=c.a,c.a.defaults.timeout=3e3,c.a.defaults.retry=4,c.a.defaults.retryDelay=1e3,c.a.interceptors.response.use(void 0,(function(t){var s=t.config;if(!s||!s.retry)return Promise.reject(t);if(s.__retryCount=s.__retryCount||0,s.__retryCount>=s.retry)return Promise.reject(t);s.__retryCount+=1;var i=new Promise((function(t){setTimeout((function(){t()}),s.retryDelay||1)}));return i.then((function(){return c()(s)}))})),window.commentDetail=function(){new a["a"]({render:function(t){return t(Z)},data:function(){return{BUS:pt}}}).$mount("#commentAnli"),new a["a"]({render:function(t){return t(z)},data:function(){return{BUS:pt}}}).$mount("#commentReco")},a["a"].filter("numFormat",(function(t){return t>1e5?(t/1e4).toFixed(1)+"W":t>1e4?(t/1e4).toFixed(2)+"W":t})),window.comAnli=new a["a"]({render:function(t){return t(Z)}}),window.comReco=new a["a"]({render:function(t){return t(z)}}),window.AnliTemp=null,window.comList=new a["a"]({render:function(t){return t(et)}}),window.comCommon=new a["a"]({render:function(t){return t(ut)}})}});
//# sourceMappingURL=app.js.map