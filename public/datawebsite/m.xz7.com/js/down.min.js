var browser={versions:function(){var e=navigator.userAgent;navigator.appVersion;return{wechat:e.indexOf("MicroMessenger")>-1,ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1,iPhone:e.indexOf("iPhone")>-1||e.indexOf("Mac")>-1,mobile:!!e.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i),iPad:e.indexOf("iPad")>-1,ios9:e.indexOf("iPhone OS 9")>-1,MQQBrowser:e.indexOf("MQQBrowser")>-1,UCBrowser:e.indexOf("UCBrowser")>-1,Safari:e.indexOf("Safari")>-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},Cookie={get:function(e){var t,i="";return(t=document.cookie.match("(?:^| )"+e+"(?:(?:=([^;]*))|;|$)"))&&(i=t[1]?unescape(t[1]):""),i},set:function(e,t,i,a){i=i||2592e6;var n=new Date,s="";n.setTime(n.getTime()+i),s=e+"="+escape(t)+";expires="+n.toGMTString()+";path=/;",a&&(s+="domain="+a+";"),document.cookie=s},del:function(e,t){Cookie.set(e,"",-1,t)}};

if(!browser.versions.mobile){
		var e = window.location.pathname,
			c = /\/(downinfo|article|company)\/(\d+)\.html/ig;
		if (c = c.exec(e)) window.location.href = "http://www.xz7.com" + c[0];
		else if (c = /\/(downlist|article)\/(r|s)_(\d+)_(\d+)\.html/ig, c = c.exec(e)) window.location.href = "http://www.xz7.com" + c[0];
		//else if (c = /\/(downlist)\/(r|s)_(\d+)_(hot|best)_(\d+)\.html/ig, c = c.exec(e)) window.location.href = "http://www.xz7.com" + c[0];
		else if (c = /^\/(yp|s)\/(\w+)\//ig, c.exec(e)) window.location.href = "http://www.xz7.com" + e;
}
$(function() {
    function e(e) {
        $(e).append('<li class="sq"><span></span></li>'), $(e).find("li").eq(4).after(
            '<li class="zk"><span></span></li>'), $(e).find(".sq").hide(), $(e).find(".zk").click(function() {
            $(e).find("li").show().removeClass("hide"), $(this).hide()
        }), $(e).find(".sq").click(function() {
            $(e).find("li").each(function(e) {
                var t = e;
                t > 5 && $(this).hide()
            }), $(e).find(".zk").show()
        })
    }
    1 != $("body#search").length && 1 != $("body#hsearch").length && $("#Search_form").click(function() {
        return window.location.href = "/search/hotsearch/", !1
    });
   
    var i = !1,
        a = !1;
    $("#mcate b").click(function() {
        0 == i ? ($("#mcateCont").css("height", "auto"), $("#nav .pullNav").removeClass("open"), $(
            "#nav .moreNav").css("display", "none"), a = !1, i = !0) : ($("#mcateCont").animate({
            height: "0px"
        }, 100), i = !1)
    }), $("#mcateCont p span").click(function() {
        $(this).addClass("cur").siblings().removeClass("cur");
        var e = $("#mcateCont p span").index(this);
        $("#mcateCont ul").eq(e).addClass("on").siblings().removeClass("on")
    }), $("#topNav").length > 0 && e("#topNav ul");
    var n = document.domain,
        s = document.referrer;
    if (s.indexOf(n) > -1 && window.history.length > 0 && $(".sback, .back").on("click", function() {
            return window.history.go(-1), !1
        }), 2 == $("footer.bottom p a").length) {
        var r = document.title;
       // $("footer.bottom p a:last").after('|<a href="/feedback.html?tit=' + r + '">举报反馈</a></a>')
    }
});

if ($("#lookmore").length > 0) {
    var obj = $("#lookmore"),
        num = obj.data("show");
    num && (obj.parent().children().hide().slice(0, num).show(), obj.parent().children().length - 1 <= num ? obj.hide() :
        obj.show()), $("#down-page .historyver #lookmore").hide(), obj.click(function() {
        $(this).hasClass("expand") ? (obj.find("span").text("展开全部"), obj.parent().children().hide().slice(0,
            num).show(), obj.show()) : (obj.find("span").text("收起内容"), obj.parent().children().show()), $(
            this).toggleClass("expand")
    })
}
if ($(".historyver").length > 0 && 0 == $(".historyver").find("p").length && $(".historyver").remove(), $(".footer_nav")
    .length > 0 && $(".footer_nav").css("height", "42px"), $("#tcsyy").length > 0) {
    var li = $("#tcsyy .tags-main-ul > li");
    if (len = li.length, page = Math.ceil(len / 8), 0 == len) $("#tcsyy").remove();
    else {
        len < 8 && $("#tcsyy").find(".pagenum").remove();
        for (var i = 0; i < page; i++) $("#tcsyy .tags-main-ul > li").slice(0, 8).wrapAll(
            '<div class="tags-main-box"><ul class="tags-box-ul"></ul></div>');
        $("#tags-main1").length > 0 && scroll("tags-main1")
    }
}
$(".rank").length > 0 && (loadmore(), $(".rank .list").each(function() {
        //$(this).find("li").hide().slice(0, 4).show()
    }), $(".tab-panel ul li").parents("section").children(".tab-content").hide().eq(1).show(), $(".tab-panel ul li")
    .click(function() {
        $(this).parents("section").children(".tab-content").hide().eq($(this).index()).show(), $(this).addClass(
            "active").siblings().removeClass("active")
    }));

    t1 = null,
    lazyimg = function(e) {
        var t = {
            effect: "fadeIn",
            placeholder: "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAAAAACH5BAEAAAAALAAAAAABAAEAQAICRAEAOw==",
            threshold: 200,
            failure_limit: 10
        };
        $(e).lazyload(t)
    };
lazyimg("img.lazy");
var platformStatus = !1;
$(function() {
    $('.rank .tab-panel ul li').eq(0).unbind('click');
    if ($("#btns1111 #nobtn1111").length > 0) {
        if (1 == $("header#info").attr("tort")) return;
        window.location.href = "/404.html"
    }
   /* $.ajax({
        method: "get",
        url: "/e/extend/ajax.php?dopost=hotkey",
        dataType: "json",
        data: {
            position: 2
        },
        success: function(e) {
            if ("undefined" != typeof e.data) {
                for (var t = e.data, i = "", a = 0; a < t.length; ++a) i += '<a href="' + t[a].url +'">' + t[a].title + "</a>";
                $(".hot_gamerec > .hot_game").html(i)
            }
        }
    });*/
    var comment = function() {
        function writeComment(e) {
           
            var t,repid=e;
            t = e ? $("#comment-list .w-text textarea").val() : $("#submit .w-text textarea").val(), oli = oul.find("li"),
                 $.ajax({
                url: "/e/pl/doaction.php",
                type: "POST",
                data: {
                    saytext: t, id: oid, classid: classid,repid:repid,
                    nomember:1,
                    enews:'AddPlajax'
                },
                beforeSend: function() {
                    return !e && $("#submit #verify").hasClass("disable") || e && $("#comment-list #verify").hasClass("disable") ? ( alert('您的评论太短了'), !1) : 1 == Cookie.get("oldTime" + oid) ? (  alert('您评论次数太频繁啦') , !1) : void 0 },
                success: function(msg) {
                    var msg = eval("("+msg+")");
                    if(msg.status==1){
                        alert('发表成功，请等待审核'),$(".w-text textarea").val(""), $("#comment").hasClass("new") && ($("#comment-list div.post").remove(), $( "#view-comment .post header").css({display: "block"}), $("#submit").css({display: "none"})), Cookie.set("oldTime" + oid, "1", 12e4)
                    }else{
                        cmtmsg(msg.message);
                    }
                }
            })
        }
        function cmtmsg(text) {
            var erro=$("#comment .erro");
            erro.show().html(text);
            setTimeout( function(){ erro.html('');}, 3000 );
        }
        function readComment() {
            if (oli = oul.find("li"), 0 == oul.find("li.org").length) {
                if (0 == oli.length) return !1;
                p = 1, 
                oul.find("li").each(function(e) {
                    $(this).addClass("org"), $(this).find("time").text(String($(this).find("time").text()).split(" ")[0]),
                    (Number($(this).find(".ctrl > s").attr("data-id")) + Number(String($(this).find("time").text()).split(" ")[0].split("/")[2]) ) % 2 == 0 ? $(this).prepend('<img src="/static/img/cmthead2.png" />') : $(this).prepend('<img src="/static/img/cmthead1.png" />')
               });
                    
                    
                var rpshtml = '<div class="post"><fieldset class="w-text"><textarea onkeyup="validate()"></textarea></fieldset><fieldset class="w-button"><input id="verify" class="button disable" type="submit" value="点击发言" hidefocus="true"></fieldset><input type="hidden" id="repid" value="' + oid + '"></div>';
                $(".rps").each(function() {
                    var e = $(this).attr("is_bind");
                    1 != e && ($(this).attr("is_bind", 1), $(this).bind("click", function() {
                        1 == $(this).parents("li").find("div.post").length ? $(
                            "#comment-list div.post").remove() : ($("#comment-list div.post").remove(), $(this).parents("li").append(rpshtml), $("#comment").hasClass("new") &&
                            ($("#view-comment .post header").css({display: "block"}), $("#submit").css({display: "none"})), $("#comment-list #verify").click(function() {
                                writeComment($(this).parents(".post").siblings(".ctrl").find(".rps").attr("data-id"))
                            }))
                    }))
                }), $(".ctrl > a").each(function() {
                    var e = $(this).attr("is_bind");
                    1 != e && ($(this).attr("is_bind", 1), $(this).bind("click", function() {
                        if ($(this).hasClass("is_ding")) alert("您已经顶过了");
                        else {
                            $(this).addClass("is_ding");
                            var e;
                            "赞" == $(this).find("span").text() ? ($(this).removeClass("txt"), e = 0) : e = Number($(this).find("span").text()),
                                $(this).find("span").html(e + 1),plid=$(this).siblings(".rps").attr("data-id"), $.ajax({
                                    type: "GET",
                                    dataType: "json",
                                    url: "/e/pl/doaction.php",
                                    data: "enews=DoForPlajax&id="+oid+"&classid="+classid+"&dopl=1&doajax=1&ajaxarea=pldigg"+ plid +"1&plid=" + plid+"&callback=?",
                                    success: function(data) { if(data.status == 1) { } else {	alert(data.msg);} }
                                })
                        }
                    }))
                })
            }
            return !(oul.find("li.org").length < 5) && (5 == oul.find("li.org").length && 1 == p ? ($("#view-comment .button-status-complete").css("display", "block"), $("#comment .button").show(), p++, !1) : (p = Math.floor(oli.length / 5 + 1), void $.ajax({
                type: "get",
                url: "/e/extend/comment/",
                dataType: "json",
                data: "id=" + oid + "&classid=" + classid + "&page=" + p + "&callback=?",
                success: function(data) {
                    $('.plnum').html(data.num);
                    if(data.num > 0){
                    	$('#comment-list').show();
                        if(data.pllist){
                    	$.each(data.pllist, function(index, v){
                    		$("#comment-list").append('<li><img src="/static/img/cmthead' + v.face + '.png" /><time>'+v.saytime+'</time><p class="ctrl"><a href="javascript:;"><span id="pldigg'+v.plid+'1">'+v.zcnum+'</span></a><s  data-id="'+v.plid+'"class="rps">回复</s></p><div class="cmt"><p class="user">'+v.sayip+' '+v.plusername+'</p><p>'+v.saytext+'</p></div></li>');
                    	});
                        }else{
                            $("#view-comment .button").val("没有更多评论了！").attr("disabled",true);
                        }
                    	
                    	
                    }
                    
                    var rpshtml = '<div class="post"><fieldset class="w-text"><textarea onkeyup="validate()"></textarea></fieldset><fieldset class="w-button"><input id="verify" class="button disable" type="submit" value="点击发言" hidefocus="true"></fieldset><input type="hidden" id="app-id" value="' + oid + '"></div>';
                    $(".rps").each(function() {
                        var e = $(this).attr("is_bind");
                        1 != e && ($(this).attr("is_bind", 1), $(this).bind("click",function() {
                                1 == $(this).parents("li").find("div.post").length ? $("#comment-list div.post").remove() :($("#comment-list div.post").remove(),
                                $(this).parents("li").append(rpshtml), $("#comment").hasClass("new") && ($("#view-comment .post header").css({display: "block"}), $("#submit").css({display: "none"})), 
                                $("#comment-list #verify").click(function() {writeComment($(this).parents(".post").siblings(".ctrl").find(".rps").attr("data-id"))
                                        }))
                            }))
                    }), $(".ctrl > a").each(function() {
                        var e = $(this).attr("is_bind");
                        1 != e && ($(this).attr("is_bind", 1), $(this).bind(
                            "click",
                            function() {
                                if ($(this).hasClass("is_ding")) alert(
                                    "您已经顶过了");
                                else {
                                    $(this).addClass("is_ding");
                                    var e;
                                    "赞" == $(this).find("span").text() ?
                                        ($(this).removeClass("txt"), e =
                                            0) : e = Number($(this).find("span").text()), $(this).find("span").html(e + 1),plid=$(this).siblings(".rps").attr("data-id"), $.ajax({
                                            type: "GET",
                                            dataType: "json",
                                            url: "/e/pl/doaction.php",
                                            data: "enews=DoForPlajax&id="+oid+"&classid="+classid+"&dopl=1&doajax=1&ajaxarea=pldigg"+ plid +"1&plid=" + plid+"&callback=?",
                                            success: function(data) { if(data.status == 1) { } else {	alert(data.msg);} }
                                        })
                                }
                            }))
                    })
                }
            })))
        }
        var oul = $("#comment-list"),
            oid = $("input[id=id]").val(),
            classid = $("input[id=classid]").val(),
            oli = oul.find("li"),
            p = Math.floor(oli.length / 5 + 1);
        $("#submit #verify").click(function() { writeComment() }),
        readComment(),
        $("#view-comment .button").click(function() { readComment() }),
        $("#view-comment header .fb,#gocomment").click(function() {
            $("#comment").hasClass("new") ? ($("#view-comment .post header").css({display: "none"}), $("#comment-list div.post").remove()) : $("#view-comment").css({display: "none"}), $("#submit").css({display: "block"}), $(".w-text textarea").focus() }),
            $("#cancel").click(function() {
            $("#comment").hasClass("new") ? $("#view-comment .post header").css({display: "block"}) : $("#view-comment").css({display: "block"}), $("#submit").css({display: "none"})
        })
    }()
});
var is_weixin = function() {
    var e = ($(document).height(), $(window).width(), !0);
    return $("body").append('<div class="mask main-bg"><img src="/public/img/tipwx.png"></div>'), $(".mask img").css({
        position: "fixed",
        right: "22px",
        top: "15px"
    }), document.addEventListener("touchmove", function(t) {
        e && (t.preventDefault(), t.stopPropagation())
    }, !1), $(".mask").click(function() {
        $(".mask").remove(), e = !1
    }), !1
};
/*if ($("#btns .dbtn").click(function(e) {
        var t = new Image;
        t.src = "https://stat-api.20hn.cn/jf.gif?web_id=5&id=" + _webInfo.Id + "&cate_id=" + _webInfo.cid +
            "&cate=" + $(".cata").text() + "&title=" + $(".name").text() + "&device=1&encode=gbk"
    }), browser.versions.wechat && $("#btns .dbtn").click(function() {
        var e = $(this).attr("href");
        (e.indexOf("itunes.apple.com") < 0 && "undefined" != typeof _platformInfo.Android || "undefined" == typeof _platformInfo
            .Android && "undefined" == typeof _platformInfo.iPhone) && (is_weixin(), event.preventDefault())
    }), navigator.userAgent.toLowerCase().indexOf("ucbrowser") > -1 && browser.versions.android) {
    var uctip = '<div id="uctip"><img src="/public/img/tip_uc.gif" /><i class="uc_bg"></i></div>';
    $("#down-page").append(uctip), $("#btns .dbtn").click(function() {
        $("#uctip").show()
    }), $("#uctip .uc_bg").live("click", function() {
        $("#uctip").hide()
    })
}*/

$("body#down-page header#info .cata").html().indexOf("iPhone") > -1 ? $("body#down-page header#info .cata").html($(
        "body#down-page header#info .cata").html().replace("iPhone", "")) : $("body#down-page header#info .cata").html()
    .indexOf("iPad") > -1 && $("body#down-page header#info .cata").html($("body#down-page header#info .cata").html().replace(
        "iPad", ""));
var game_down = function() {
    function e(e) {
        var t = $("#" + e);
        oul = t.find(".tags-main-ul"), oli = oul.find(".tags-main-box"), onav_li = t.parent().find("#wrapert ul li"),
            ospan = '<span class="active"></span>', oli_l = oli.length, window_w = parseInt($(window).width() - 16),
            onav_w = parseInt(window_w / 4), oli.width(window_w), oli_w = oli.eq(1).outerWidth(!0), onav_li.width(
                onav_w), tag_li = $(".bq-main span");
        for (var i = 1; i < oli_l; i++) ospan += "<span></span>";
        t.next(".pagenum").html(ospan), oul.width(oli_l * oli_w);
        var a;
        tag_li.each(function(e) {
            $(this).click(function() {
                onav_li.eq(e).addClass("active").siblings().removeClass("active"), t.next(
                    ".pagenum").find("span").eq(e).addClass("active").siblings().removeClass(
                    "active"), a.x = -e * window_w, $(".tags-main-ul").css("-webkit-transform",
                    "translate3d(" + a.x + "px, 0px, 0px)"), e >= 3 && t.parent().find(
                    "#wrapert ul").css({
                    "-webkit-transform": "translate3d(" + -window_w + "px, 0px, 0px)"
                })
            })
        }), t.parent().find("#wrapert ul li:first").addClass("active"), t.parent().find("#wrapert ul li").each(
            function(e) {
                $(this).click(function() {
                    var i = t.parent().find("#wrapert ul li");
                    i.eq(e).addClass("active").siblings().removeClass("active"), t.next(".pagenum").find(
                            "span").eq(e).addClass("active").siblings().removeClass("active"), a.x = -e *
                        window_w, t.parent().find(".tags-main-ul").css({
                            "-webkit-transform": "translate3d(" + a.x + "px, 0px, 0px)"
                        })
                })
            }), a = new iScroll(e, {
            snap: !0,
            momentum: !1,
            hScrollbar: !1,
            onScrollEnd: function() {
                var e = t.parent().find("#wrapert ul li");
                e.removeClass("active"), t.next(".pagenum").find("span").removeClass("active"), e.eq(
                        this.currPageX).addClass("active"), t.next(".pagenum").find("span").eq(this.currPageX)
                    .addClass("active"), this.currPageX >= 8 ? t.parent().find("#wrapert ul").css({
                        "-webkit-transform": "translate3d(" + -2 * window_w + "px, 0px, 0px)"
                    }) : this.currPageX >= 4 ? t.parent().find("#wrapert ul").css({
                        "-webkit-transform": "translate3d(" + -window_w + "px, 0px, 0px)"
                    }) : t.parent().find("#wrapert ul").css({
                        "-webkit-transform": "translate3d(0px, 0px, 0px)"
                    })
            }
        })
    }! function() {
        if (0 == $("#wrapert li").length && $(".guess").remove(), 1 == $("#wrapert li").length && $(
                ".guess .pagenum").remove(), $("#xgk li").length < 1 && $("#xgk").remove(), $("#down-page .xgwz li")
            .length < 1 && $(".xgwz").remove(), $(".video-box").length > 0 && $(".video-box").html().indexOf("没有数据") ==
            -1 && $(".video-box").css("display", "inline-block"), $(".areaApp .scroll_wrap li").length < 1 && $( ".areaApp").remove(), $("#btns #nobtn").length > 0) {
            var e = $(".guess").detach();
            $("header#info").after(e)
        }
        $(".authorApp li").length < 1 && $(".authorApp").remove()
    }(),
    function() {
        $(".xgwz ul li").length > 0 ? $(".xgwz").show() : $(".xgwz").remove(), $("#tab span").click(function() {
            $(this).text().indexOf("介绍") > -1 ? ($(this).addClass("cur").siblings().removeClass("cur"), $(
                '.a_d > div,.cont:not("#comment"),.kaifu,.historyver,.guess,.authorApp,#tcsyy,.areaApp,.xgsp,.xgwz,.rela_down,.rank,.rank_appin,.tjyxph,.compy'
            ).show()) :$(this).text().indexOf("相关") > -1 ? ($(this).addClass("cur").siblings().removeClass("cur"), $('.a_d > div,.cont:not("#comment"),#xgk,.xgk,.guess,.authorApp,#tcsyy,.areaApp,.xgwz,.tjyxph,.compy').hide(),$('.rela_down,.rank').show(),lazyimg("img.lazy")) : $(this).text().indexOf("评论") > -1 && ($(this).addClass("cur").siblings().removeClass("cur"), $('.a_d > div,.cont:not("#comment"),.kaifu,.tjyxph,.historyver,.guess,.authorApp,#tcsyy,.areaApp,.xgsp,.xgwz,.rela_down,.rank,.rank_appin,.compy').hide())
            
        })
    }(),
    
       
        
           
    function() {
        $(".xq-top #mcate b").click(function() {
            $(".xq-nav").slideToggle()
        }), $(".xq-top #mcate em").click(function() {
            $(".xq-top .title").hide(), $(".xq-top form").show(), $("#mcate").css("width", "35px"), $(
                "#mcate em").remove(), $(".xq-top").css("padding-right", "51px")
        })
    }(),
    function() {
        var e = $("header").height() + 90;
        $(window).scroll(function() {
            var t = $("#btns"),
                i = $("#yuyue"),
                a = ($(window).scrollTop(), navigator.userAgent.toLowerCase());
            return !(a.indexOf("baiduboxapp") > -1) && ($(window).scrollTop() >= e ? (t.css({
                    position: "fixed",
                    top: 0
                }).addClass("on"), i.css({
                    position: "fixed",
                    top: 0,
                    width: $(window).width() - 20 + "px",
                    padding: "10px",
                    margin: "0",
                    background: "#fff",
                    left: 0
                }).addClass("on"), $("#goTop").fadeIn()) : Math.abs(parseInt($("body").css("top"))) > 0 &&
                Math.abs(parseInt($("body").css("top"))) >= e ? i.css({
                    position: "fixed",
                    top: 0,
                    width: $(window).width() - 20 + "px",
                    padding: "10px",
                    margin: "0",
                    background: "#fff",
                    left: 0
                }).addClass("on") : Math.abs(parseInt($("body").css("top"))) > 0 && Math.abs(parseInt($(
                    "body").css("top"))) < e ? i.css({
                    position: "relative",
                    top: "auto",
                    width: "auto",
                    padding: "0",
                    margin: "10px 0",
                    background: "#fff",
                    left: "auto"
                }).removeClass("on") : (t.css({
                    position: "relative"
                }).removeClass("on"), i.css({
                    position: "relative",
                    top: "auto",
                    width: "auto",
                    padding: "0",
                    margin: "10px 0",
                    background: "#fff",
                    left: "auto"
                }).removeClass("on"), $("#goTop").fadeOut()), void($(".cont .intro").offset().top + $(
                    ".cont .intro").height() - 35 <= $(window).scrollTop() ? $("#xgk").addClass(
                    "fix") : $("#xgk").removeClass("fix")))
        })
    }(),
    function() {
        var e = 1;
        $("#expand span").click(function() {
            $("#expand").toggleClass("expand"), e > 0 ? ($("#summary").hide(), $("#details").show(), $(this)
                .html("收起内容"), $("#expand span").addClass("sq"), e = 0) : ($("#summary").show(), $(
                    "#details").hide(), $(this).html("显示全部"), $("#expand span").removeClass("sq"), e =
                1)
        })
    }(),
    function() {
        var e = $("#details").text(),
            t = 340;
        if (0 == $("#thelist img").length && $("#wrapper").hide(), e.length < t || 0 == $("#thelist img").length) $(
            "#summary,#expand").hide(), $("#details").show();
        else {
            var i = e.slice(0, t) + "...";
            $("#summary").html(i)
        }
    }(),
    function() {
        0 == $("#expand").length && 0 == $("#summary").length && ($("#details").show(), $("#details").text().length >
            2000 /*&& ($("#details").addClass("min"), $("#details").after(
                    '<p class="nzk">展开全文 +</p><p class="nsq">收起全文 -</p>'), $(".intro > .nzk").css("top", 415 +
                    $(".keyText").height()), $(".intro .nzk").show(), $(".intro .nsq").hide(), $(".intro .nzk")
                .click(function() {
                    $("#details").removeClass("min"), $(".intro .nsq").show(), $(".intro .nzk").hide()
                }), $(".intro .nsq").click(function() {
                    $("#details").addClass("min"), $(".intro .nzk").show(), $(".intro .nsq").hide()
                }))*/)
    }(),
    function() {
        function e() {
            n > s ? ($("#thelist img").width(225), $("#thelist img").height(225 * r), $("#thelist li").width(235),
                o = 235 * $("#thelist li").length) : ($("#thelist img").width(150), $("#thelist img").height(
                150 * r), $("#thelist li").width(160), o = 160 * $("#thelist li").length), $("#scroller").width(
                o), t = new iScroll("wrapper", {
                hScrollbar: !1
            })
        }
        var t, i, a, n, s, r, o = 0,
            l = new Image,
            c = 0,
            d = 0,
            h = [],
            p = 80 * $("#thelist2 li").length,
            u = 80 * $("#thelist4 li").length;
        $("#scroller2").width(p), $("#scroller4").width(u), $("#thelist img").length > 0 && $("#thelist img").each(
            function(i) {
                if ($(this).attr("data-original")) 0 == i && (l.src = $(this).attr("data-original"), l.onload =
                    function() {
                        n = l.width, s = l.height, r = (s / n).toFixed(2), e()
                    });
                else if (0 == $("#scroller video").length) {
                    var l = new Image;
                    if (l, l.src = $(this).attr("src"), l.complete) n = l.width, s = l.height, r =
                        (s / n).toFixed(2), n < s || n == s ? ($('#thelist img[src="' + l.src + '"]').width(140),
                            $('#thelist img[src="' + l.src + '"]').height(140 * r), $('#thelist img[src="' + l.src +
                                '"]').parent("li").width(150), d++) : ($('#thelist img[src="' + l.src + '"]').width(
                            215), $('#thelist img[src="' + l.src + '"]').height(215 * r), $(
                            '#thelist img[src="' + l.src + '"]').parent("li").width(225), c++);
                    else if (null != l.onload) l.onload = function() {
                        n = l.width, s = l.height, r = (s / n).toFixed(2), n < s || n == s ? ($(
                            '#thelist img[src="' + l.src + '"]').width(140), $('#thelist img[src="' +
                            l.src + '"]').height(140 * r), $('#thelist img[src="' + l.src + '"]').parent(
                            "li").width(150), d++) : ($('#thelist img[src="' + l.src + '"]').width(215),
                            $('#thelist img[src="' + l.src + '"]').height(215 * r), $(
                                '#thelist img[src="' + l.src + '"]').parent("li").width(225), c++)
                    };
                    else {
                        h.push(l);
                        var a = setInterval(function() {
                            l = h[0], l.complete && (clearInterval(a), h.shift(), l.width > 20 && (n = l.width, s = l.height, r = (s / n).toFixed(2)), n < s || n == s ? ($('#thelist img[src="' + l.src + '"]').width(140), 
             $('#thelist img[src="' + l.src + '"]').height(140 * r), 
             $( '#thelist img[src="' + l.src + '"]').parent("li").width(150),
                                    d++) : ($('#thelist img[src="' + l.src + '"]').width(215), $(
                                        '#thelist img[src="' + l.src + '"]').height(215 * r), $(
                                        '#thelist img[src="' + l.src + '"]').parent("li").width(225),
                                    c++), d + c == $("#scroller img").length && (
                                    //console.log(d*150,c),
                                    $("#scroller").width(
                                    152 * d + 225 * c), t = new iScroll("wrapper", {
                                    hScrollbar: !1
                                }), 
                                $("#scroller").css({height: "100%"})), 
                                $('#wrapper img[src="' + l.src + '"]').parent("li").attr({href: l.src, "data-size": n + "x" + s, "data-med": l.src, "data-med-size": n + "x" + s }))
                        }, 1e3)
                    }
                    $('#wrapper img[src="' + l.src + '"]').parent("li").attr({href: l.src,"data-size": n + "x" + s,"data-med": l.src,"data-med-size": n + "x" + s})
                }
                d + c == $("#scroller img").length && 0 == $("#scroller video").length && ($("#scroller").width(152 * d + 225 * c), t = new iScroll("wrapper", {hScrollbar: !1}), $("#scroller").css({height: "100%"}))
            }), $("#wrapper2 li").length > 0 && (i = new iScroll("wrapper2", {
            hScrollbar: !1
        })), $("#wrapper4 li").length > 0 && (a = new iScroll("wrapper4", {
            hScrollbar: !1
        }))
    }(),
    function() {
        $(".rela_down").addClass("pictxt").removeClass("list");
        var e = $(".rela_down .tags-main-ul > li");
        len = e.length, page = Math.ceil(len / 8);
        for (var t = 0; t < page; t++) $(".rela_down .tags-main-ul > li").slice(0, 8).wrapAll(
            '<div class="tags-main-box"><ul class="tags-box-ul"></ul></div>');
        $("#tags-main3").length > 0 && scroll("tags-main3")
    }(),
    function() {
        $(".wefocus").remove()
    }(), $("#tags-main").length > 0 && e("tags-main");
    var t = function(e) {
        function t(e) {
            new Swiper(".light-box .swiper-container", {
                initialSlide: e,
                zoom: !0,
                zoom: {
                    maxRatio: 2,
                    toggle: !1
                },
                pagination: {
                    el: ".swiper-pagination",
                    type: "fraction"
                }
            })
        }
     
        var i = "",
            a = $(e);
        a.each(function() {
            var e = $(this).attr("src");
            i += '<li class="swiper-slide"><div class="swiper-zoom-container"><img src="' + e +
                '"></div></li>', $(this).click(function() {
                    flag = !0;
                    var e = a.index(this);
                    if ($(".light-box").length < 1) {
                        var n = "";
                        n += '<div class="light-box">', n += '    <div class="swiper-container">',
                            n += '        <ul class="swiper-wrapper">' + i + "</ul>", n +=
                            '        <div class="swiper-pagination swiper-pagination-white"></div>',
                            n += "    </div>", n += '    <span class="close">关闭</span>', n +=
                            "</div>", $("body").append(n)
                    }
                    var s = $(window).height();
                    $(".light-box img").css({
                        "max-height": .8 * s
                    }), $(".light-box,.light-box .close").show(), document.addEventListener(
                        "touchmove",
                        function(e) {
                            flag && (e.preventDefault(), e.stopPropagation())
                        }, !1), t(e)
                })
        }), $(document).on("click", ".light-box", function() {
            $(".light-box").remove(), flag = !1
        })
    };
    $('#details h3').filter(function() {
       return this.textContent === this.textContent.toUpperCase();
    }).replaceWith(function() {
       return $('<p class="introTit"></p>').append(this.childNodes);
    });

    $("#details img").length > 0 && t("#details img"), $("#thelist img").length > 0 && t("#thelist img"), 1 ==
        $(".kaifu li").length && $(".kaifu").remove(), $(".kaifu .lis").each(function() {
            
    })
}();
if ($("#down-page").length > 0) {
    var k_keys = [],
        cur_platform = 2,
        pid = 0,
        r_cid = 0,
        r_rid = 0;
    browser.versions.android ? (cur_platform = 0, "undefined" != typeof _platformInfo.Android && (r_cid = _platformInfo
            .Android.cid, r_rid = _platformInfo.Android.rid, pid = _platformInfo.Android.id)) : browser.versions.ios &&
        (cur_platform = 1, "undefined" != typeof _platformInfo.iPhone && (r_cid = _platformInfo.iPhone.cid, r_rid =
            _platformInfo.iPhone.rid, pid = _platformInfo.iPhone.id)), 2 !== cur_platform && ($("#xgk a").each(function() {
            k_keys.push($(this).text())
        }), k_keys = 0 === k_keys.length ? "" : k_keys.join(","), $.ajax(/*{
            method: "get",
            data: {
                dopost: 'jptj',
                id: _webInfo.rid,
                pid: pid
            },
            url: "/e/extend/ajax.php",
            dataType: "json",
            success: function(e) {
                if ("undefined" != typeof e.data) {
                    var t = e.data,
                        i = "";
                       // console.log(cur_platform);
                        for (var a = 0; a < t.length; ++a)
                         i += '<li><a href="' + t[a].ID +'"><img src="' + t[a].SmallImg + "\"><p>" + t[a].ResName + "</p></a></li>";                  
                        $(".tjyxph #scroller3").append("<ul id='thelist3'>" + i + "</ul>");//, loadApp();
                    var n;
                    sw3 = 80 * $("#thelist3 li").length, $("#scroller3").width(sw3), $("#wrapper3 li").length > 0 && (n = new iScroll("wrapper3", { hScrollbar: !1  }))
                }
            },
            error: function() {}
        }*/));
 if($("#btns a").attr("isDown")==0){
            $("body").addClass("notbg");
  }
  if (browser.versions.android && "undefined" != typeof _platformInfo && "undefined" != typeof _platformInfo.Android){
      $("#info #btns a").attr("href", _platformInfo.Android.Address);
  }else if (browser.versions.ios && "undefined" != typeof _platformInfo && "undefined" != typeof _platformInfo.iPhone){
      $("#info #btns a").attr("href", _platformInfo.iPhone.Address);
  }else if (browser.versions.ios && "undefined" != typeof _platformInfo && "undefined" != typeof _platformInfo.iPhone){
      $("#info #btns a").attr("href", _platformInfo.iPhone.Address);
  }else if (browser.versions.android && 1 != $("#nobtn").length && 0 != $("#btns a").attr("isDown")) {
      if(_platformInfo.Pc){
          var tpt = "电脑版";
          var downurl = _platformInfo.Pc.Address;
      }
      if(_platformInfo.iPhone){
          var tpt = "ios版";
          var downurl = _platformInfo.iPhone.Address;
      }
      if(tpt && downurl){
      $("#info #btns a").attr("href", downurl),
      $("#info #btns").after('<p class="jctip"><s></s>没有对应的安卓版，点击下载的是：<em>' + $("#info .name h1").text() + tpt + "</em></p>")    }
      
    } else if (browser.versions.ios && 1 != $("#nobtn").length && 0 != $("#btns a").attr("isDown")) {
        if(_platformInfo.Pc){
            var tpt = "电脑版";
            var downurl = _platformInfo.Pc.Address;
        }
        if(_platformInfo.Android){
            var tpt = "安卓版";
            var downurl = _platformInfo.Android.Address;
        }
        if(tpt && downurl){
        $("#info #btns a").attr("href", downurl),
        $("#info #btns").after('<p class="jctip"><s></s>没有对应的IOS版，点击下载的是：<em>' + $("#info .name h1").text() + tpt + "</em></p>")    }
    }
$("#btns a").click(function(){
    if($(this).attr("isDown")){
		var id = _webInfo.Id, cid = _webInfo.cid;
		$.post("/e/extend/ajax.php",{'dopost':'downnum','id':id,'classid':cid},function(res){
		});	
    }
});
   
}
$(".xgsp li").length > 0 ? $(".xgsp li .times").after('<span class="icon"></span>') : $(".xgsp").remove();
/*
var loadApp = function() {
    $.getJSON("/ip/?dopost=citylist", function(e) {
        if ("undefined" != typeof e.data) {
            for (var t = e.data, r = "", o = 0; o < t.length; ++o) r += '<li><a href="' + t[o].ID + '"><img src="' + t[o].SmallImg + '" /><p>' + t[o].ResName + "</p></a></li>";
            var i = "";
            "undefined" != typeof e.path && (i = '<a href="/' + e.path + '.html" class="more">更多</a>'), 
            $(".areaApp .d_title em").html(' + n + "地区APP');
            $(".areaApp .scroll_wrap ul").html(r);
        }
        
        
    })
};*/
/*browser.versions.android && ($("#info #btns a").click(function() {
    let qqqun='';
        html ='<div class="m-click-show"><div class="m-show-cont"><strong class="g-show-title">下载此 APP 的<span>还下载了</span>这些</strong><b class="m-close-btn">+</b>',
            "" != qqqun ? html += qqqun + '<ul class="m-show-ul">' : html += '<ul class="m-show-ul">', html +=
            $("#thelist3").html().replace(/\)">(.+?)<\/a>/g, ')">$1<span class="down">下载</span></a>'), html =
            html.replace(/'tuijian'/g, "'tuijian_tc'"), html += '</ul></div><b class="m-black-bg"></b></div>',
            $(".m-click-show").length <= 0 ? setTimeout(function() {
                $("body").append(html), $(".m-show-ul li:gt(11)").remove(), $(".m-show-ul li a").not(
                    ':has("span")').append('<span class="down">下载</span>')
            }, 1500) : $(".m-click-show").fadeIn("fast")
    }), $(".m-close-btn,.m-black-bg").live("click", function() {
        $(".m-click-show").fadeOut("fast")
    })), browser.versions.android && $("#authority .a_cont > p").length > 1 && authority(), $(".logBox").length > 1 ?
    logHistory() : $(".logBox").show();*/
var isDown = $("#btns a").attr("isDown");
browser.versions.ios && "undefined" == typeof _platformInfo.iPhone && 0 == isDown || browser.versions.android &&
    "undefined" == typeof _platformInfo.Android && 0 == isDown ? $("#btns a").addClass("noDown").html("已下架").attr(
        "href", "javascript:void(0)") : browser.versions.android || browser.versions.ios || 0 != isDown || $("#btns a")
    .addClass("noDown").html("已下架").attr("href", "javascript:void(0)"), $("#btns #nobtn em").text("已下架");
var adIp = "";

$(document).on("click",".pupop .close,.mark",function(e){
  		//var $id=$(this).attr("data-id");
  		$(".mark").fadeOut(100);
  		$(".pupop").fadeOut(100);
           $("html").css({
             overflow: "auto",
             height: "auto"
             });
  });
$(document).on("click",".permissions",function(e){
      pupop('permissions');
});

function pupop(id){
            $("html").css({
                overflow: "hidden",
                 height: "100%"
            });
	$("#" + id + ",.mark").fadeIn(100);
}

$(function() {
});
var menuBottom = function() {
    var e = [],
        t = [];
    e.push("header#info"), t.push("基础信息"), $("nav#tab").length > 0 ? (e.push("#tab"), t.push("预览图")) : $(
            ".d_title.pt2").length > 0 && (e.push(".d_title.pt2"), t.push("预览图")), e.push("#details"), t.push(
            "内容介绍"), $(".kaifu").length > 0 && (e.push(".kaifu"), t.push("开服开测")), e.push(".tjyxph"), t.push(
        "精品推荐"), $(".historyver").length > 0 && (e.push(".historyver"), t.push("历史版本")), $(".guess").length > 0 && (
            e.push(".guess"), t.push("猜你喜欢")), $(".authorApp").length > 0 && (e.push(".authorApp"), t.push(
            "开发者APP")), $("#tcsyy").length > 0 && (e.push("#tcsyy"), t.push("同厂商推荐")), $(".areaApp").length > 0 && (
            e.push(".areaApp"), t.push("同地区APP")), $(".xgsp").length > 0 && (e.push(".xgsp"), t.push("相关视频")), $(
            ".xgwz").length > 0 && (e.push(".xgwz"), t.push("相关文章")), $(".rela_down").length > 0 && (e.push(
            ".rela_down"), t.push("相关下载")), $(".rank").length > 0 && (e.push(".rank"), t.push("排行榜")), e.push(
            "#comment"), t.push("评论");
    var i = '<div id="menu-pop">目录</div>';
    i += '<div id="menu-bot"><dl><dt>目录</dt><dd><ul>';
    for (var s = 0; s < t.length; s++) {
        var n = s + 1;
        if (n < 10 && (n = "0" + n), "精品推荐" == t[s]) {
            i += '<li class="mb-jptj"><span><s>' + n + "</s>" + t[s] + "</span><p>";
            for (var a = $("#thelist3 li").length > 3 ? 3 : $("#thelist3 li").length, r = 0; r < a; r++) i +=
                "<i>" + $("#thelist3 li p").eq(r).text() + "</i>";
            i += "</p></li>"
        } else if ("猜你喜欢" == t[s] && $(".guess-nav li").length > 1) {
            i += '<li class="mb-cnxh"><span><s>' + n + "</s>" + t[s] + "</span><p>";
            for (var a = $(".guess-nav li").length > 3 ? 3 : $(".guess-nav li").length, r = 0; r < a; r++) i +=
                "<i>" + $(".guess-nav li").eq(r).text() + "</i>";
            i += "</p></li>"
        } else i += "<li><span><s>" + n + "</s>" + t[s] + "</span></li>"
    }
    i += '</ul><em id="menu-close">关闭</em></dd></dl><b id="menu-mask"></b></div>', $("body").append(i), $(
        "#menu-bot dd li").eq(0).addClass("cur"), $("#menu-pop").click(function() {
        if ($("html").css("overflow-y", "hidden"), $("footer.bottom #goTop").hide(), $("#menu-mask").css(
                "display", "block"), $("#menu-bot dl").slideDown("normal", function() {
                $("#menu-close").slideDown(500)
            }), $("#menu-bot li.cur").length > 0 && $("#menu-bot li.cur").index() > 0) {
            for (var e = 0, t = 0; t < $("#menu-bot li.cur").index(); t++) e += $("#menu-bot li").eq(t)
                .height();
            $("#menu-bot dl").scrollTop(e)
        }
    }), $("#menu-mask,#menu-close").click(function() {
        $("html").css("overflow-y", "auto"), $("#menu-mask").css("display", "none"), $("#menu-bot dl")
            .slideUp("normal", function() {
                $("#menu-close").slideUp("fast")
            })
    }), $("#menu-bot dd li").each(function(t) {
        $(this).click(function() {
            $("html").css("overflow-y", "auto"), $("#menu-mask").css("display", "none"), $(
                "#menu-bot dl").slideUp("normal", function() {
                $("#menu-close").slideUp("fast")
            });
            var i = $(e[t]).offset().top - 100;
            t < 2 && (i = $(e[t]).offset().top - 60), $(window).scrollTop(i)
        })
    }), $(".mb-cnxh p i").each(function(e) {
        $(this).click(function() {
            var t = parseInt($(window).width() - 16);
            $(".guess-nav li").eq(e).addClass("active").siblings().removeClass("active"), $(
                    ".guess_nr #tags-main").next(".pagenum").find("span").eq(e).addClass("active")
                .siblings().removeClass("active"), $(".guess_nr .tags-main-ul").css(
                    "-webkit-transform", "translate3d(" + -e * t + "px, 0px, 0px)")
        })
    }), $(window).scroll(function() {
        for (var t = ($(window).scrollTop(), 0); t < e.length; t++) {
            var i = 100;
            t < 2 && (i = 60), $(e[t]).offset().top - i <= $(window).scrollTop() && ($("#menu-bot li")
                .removeClass("cur"), $("#menu-bot li:eq(" + t + ")").addClass("cur"))
        }
    })
};
$("#details div.logbox").eq(0).addClass("show");

$(document).on("click",".historylog",function(e){
        let tempHtmls ='';
        $("#details div.logbox").each(function(i) {
            0 == i && $(this).addClass("show"), tempHtmls = tempHtmls + "<li><div>" + $(this).html() + "</div></li>"
        })
        var historyloghtml='<div class="pupop" id="historylog"><div class="hd">历史日志</div><div class="bd"><ul>'+tempHtmls+'</ul></div><a href="javascript:;" class="close" data-id="historylog" target="_self">X</a></div><div class="mask"></div>';
        if($("#historylog").length > 0) { } else {
    	$("body").append(historyloghtml);
        }
    	pupop('historylog');
});
 $(document).ajaxStop(function() {
    $(this).unbind("ajaxStop"), menuBottom(), $("#menu-bot dl").css("max-height", .7 * window.screen.height)
})

function views(id,tid,aid){var reffer=document.referrer;$.ajax({type:"get",url:"/apis/see.html",data:{id:id,reffer:reffer,tid:tid,aid:aid},success:function(data){}})}
