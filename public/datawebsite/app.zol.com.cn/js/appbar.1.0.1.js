!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function t(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}var s=function(t){return null===t||""===t||void 0===t||"string"==typeof t&&""===t.trim()},r=function(o){var n=[];if(o&&"[object Object]"===Object.prototype.toString.call(o)){var t=Object.keys(o);t.length&&t.forEach(function(t){var e=o[t];s(e)||function(t){return 0===Object.keys(t).length}(e)||(e=Array.isArray(e)||"[object Object]"===Object.prototype.toString.call(e)?JSON.stringify(e):window.encodeURIComponent(e),n.push(t+"="+e))})}return n.join("&")},a=function(o){if("jsonp"===(o=o||{}).dataType)!function(o){var e=o.jsonp||"json_callback_"+Date.now(),n=document.createElement("script"),t=document.head||document.querySelector("head")||document.documentElement,a=o.data||{};!!o.cache||(a._="jsonp_"+Date.now()),a.callback=e,window[e]=function(t){window[e]=null,"function"==typeof o.success&&o.success(t)},n.async=!!o.async,n.charset="utf-8";var i=r(a),c=s(i)?o.url:o.url+(-1<o.url.indexOf("?")?"&".concat(i):"?".concat(i));n.src=c,n.onload=n.onreadystatechange=function(t,e){e||!n.readyState||/loaded|complete/.test(n.readyState)?(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null):o.error()},t.insertBefore(n,t.firstChild)}(o);else{o.type=(o.type||"GET").toUpperCase(),o.dataType=o.dataType||"json",o.async=void 0===o.async||o.async;var t=r(o.data),n=new XMLHttpRequest;if(n.onreadystatechange=function(){if(4===n.readyState){n.onreadystatechange=null;var t=n.status;if(200<=t&&t<300||304===n.status){var e=n.responseText||"";"json"===o.dataType&&"string"==typeof e&&""!==e&&(e=JSON.parse(e)),o.success&&o.success(e)}else o.fail&&o.fail(t)}},"POST"===o.type)n.open("POST",o.url,o.async),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(t);else{var e=s(t)?o.url:o.url+(-1<o.url.indexOf("?")?"&".concat(t):"?".concat(t));n.open("GET",e,o.async),n.send()}}},e=function(){function e(t){return o(this,e),"session"===t?this.session():this.local()}return t(e,[{key:"session",value:function(){var o=window.sessionStorage;return{getItem:function(t){return o.getItem(t)||""},setItem:function(t,e){try{o.setItem(t,e)}catch(t){console.log(t)}},remove:function(t){try{o.removeItem(t)}catch(t){console.log(t)}},clear:function(){try{o.clear()}catch(t){console.log(t)}}}}},{key:"local",value:function(){var i=window.localStorage;return{getItem:function(t){var e=~~(+new Date/1e3),o="";try{var n=i.getItem(t);n&&(!(n=JSON.parse(n)).expire||n.expire>e?o=n.value:this.remove(t))}catch(t){}return o},setItem:function(t,e,o){var n={value:e};if(o){var a=~~(+new Date/1e3)+o;n.expire=a}try{i.setItem(t,JSON.stringify(n))}catch(t){}},remove:function(t){try{i.removeItem(t)}catch(t){}},clear:function(){try{i.clear()}catch(t){console.log(t)}}}}}]),e}(),i=(new(function(){function e(){o(this,e);var t="######IP_CK#####";document.cookie&&document.cookie.match(/ip_ck=([^;$]+)/)&&(t=document.cookie.match(/ip_ck=([^;$]+)/)[1]),this.ipck=t,this.gifUrl="https://pvtest.zol.com.cn/images/pvevents.gif"}return t(e,[{key:"init",value:function(){var r=this.ipck,l=this.gifUrl;return{count:function(t,e){var o=void 0===e?document.URL:e,n="".concat(l,"?t=").concat(+new Date,"&event=").concat(t,"&ip_ck=").concat(r,"&url=").concat(o);(new Image).src=n},countWithParams:function(t,e,o){var n=void 0===o?document.URL:o,a=[];for(var i in e)if(e.hasOwnProperty(i)){var c=i+"="+e[i];a.push(c)}var s="".concat(l,"?t=").concat(+new Date,"&event=").concat(t,"&ip_ck=").concat(r,"&url=").concat(n);a.length&&(s="".concat(l,"?t=").concat(+new Date,"&event=").concat(t,"&").concat(a.join("&"),"&ip_ck=").concat(r,"&url=").concat(n)),(new Image).src=s}}}}]),e}())).init(),c=window.navigator.userAgent,l=/webkit/i.test(c),p=/iPhone|iPad|iPod|iTouch/i.test(c),d=/A(ndroid|dr)/i.test(c)||l&&!p,m=p?"iphone":d?"android":"windows",u=window.location.href,h=/(zol)|(shopApp)|(ZHIMAI)/i.test(c),f=function(){if(document.currentScript)return document.currentScript;for(var t=document.getElementsByTagName("script"),e=t.length,o=null,n=0;n<e;n++)"interactive"===t[n].readyState&&(o=t[n]);return o}(),b=f.getAttribute("data-selector"),w=f.getAttribute("auto"),g=!(!w||"false"!==w),v=document.querySelector(b),_=-1<f.src.indexOf("appbarforbms"),y=new e,x={top:{m:{main:"更多春季新品评测、优惠",sub:"尽在客户端推荐频道"},wap:{main:"更多春季新品评测、优惠",sub:"尽在客户端推荐频道"},bbs:{main:"中关村在线客户端",sub:"看最新科技圈热度新闻资讯报道"}},bottom:"<b>一亿用户专属科技圈产品</b><i>科技美女图集,每日送福利</i>",fixedbottom:{t:{overview:"",parameter:"",comment:"",evaluating:"",gallery:""},d:{overview:"APP赢金豆，零元兑iPhone",parameter:"APP赢金豆，零元兑iPhone",comment:"APP赢金豆，零元兑iPhone",evaluating:"APP赢金豆，零元兑iPhone",gallery:"APP赢金豆，零元兑iPhone"}}},k=/^http(s)?:\/\/(.*?)(wap|wapnew).zol.com.cn\/ask\//.test(u),T=/^http(s)?:\/\/(.*?)(wap|wapnew).zol.com.cn/.test(u),C=/^http(s)?:\/\/(.*?)m.zol.com.cn/.test(u),I="article",z=x.top.m.main,S=x.top.m.sub,P="",A=!1;A=void 0===window.isShowTopAd||!!window.isShowTopAd,"1"===y.getItem("zol-app-closed")&&(A=!1);var E="";if(T)I="wap",z=x.top.wap.main,S=x.top.wap.sub,E=window.__PRO__&&window.__PRO__.manuId?window.__PRO__.manuId:window.manuId||"";else if(/zol.com.cn\/(bbs|sjbbs|diybbs)\//.test(u))z=x.top.bbs.main,S=x.top.bbs.sec,E=window.manuid||"";else if(/^http(s):\/\/m.zol.com.cn\/brand\/(\d+)_(\d+).html/.test(u)){E=u.match(/^http(s):\/\/m.zol.com.cn\/brand\/(\d+)_(\d+).html/)[3]}else E=(/^http(s):\/\/m.zol.com.cn\/article\//.test(u),window.manuId||"");E="0"===E?"":E+"",T&&(/wap.zol.com.cn\/[^/]+\/[^/]+\/index/.test(u)?P="overview":/wap.zol.com.cn\/[^/]+\/[^/]+\/param/.test(u)?P="parameter":/wap.zol.com.cn\/[^/]+\/[^/]+\/review/.test(u)?P="comment":/wap.zol.com.cn\/[^/]+\/[^/]+\/article/.test(u)?P="evaluating":/wap.zol.com.cn\/[^/]+\/[^/]+\/pic/.test(u)&&(P="gallery"));var N=/^http(s):\/\/m.zol.com.cn\/article\/\d+.html#p\d+$/i.test(u),O=/^http(s):\/\/m.zol.com.cn\/slide\/\d+.html/i.test(u);(N||O||/[?&]from=xm/.test(u))&&(A=!1);var D,F,j,B,L={site:I,isWapAskSite:k,isWapSite:T,isMSite:C,topMainText:z,topSubText:S,wapPageType:P,isShowTopBanner:A,isShowBottomBanner:!1,isZOL:h,platform:m,isIOS:p,isAndroid:d,isNotAutoLoad:g,selector:b,appBarOuterElement:v,manuId:E,isForBms:_,isToutiao:/\sNewsArticle\/([\d.]+)\s/i.test(c)},M=new e,R={protocol:"zolapp",fallback:"//m.zol.com.cn/help.html"},H=null;window.NativeCall?H=new NativeCall(R):(D="//icon.zol-img.com.cn/cdn/nativeCall/nativeCall.min.js",F=function(){H=new NativeCall(R)},j=document.createElement("script"),B=document.getElementsByTagName("head")[0],j.charset="utf-8",j.onload=function(){F()},j.timer=setTimeout(function(){B.removeChild(j)},5e3),j.src=D,B.appendChild(j));var q={start:+new Date("2019/08/19 17:30:00"),end:+new Date("2019/09/10 11:59:59"),link:"https://m.zol.com/app/activity/coupon/v1.html",src:"https://icon.zol-img.com.cn/app/images/appbar_banner_0819.jpg",ad:!0,target:"_blank"},U=new(function(){function e(t){o(this,e),this.radomClassName=function(t){t=t||32;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",o=e.length,n="",a=0;a<t;a++)n+=e.charAt(Math.floor(Math.random()*o));return n}(8),this.options=t}return t(e,[{key:"init",value:function(){if(!L.isToutiao&&L.isShowTopBanner){window.zolapp_hash=this.radomClassName,window.ZOL_APPBAR_INIT=!0;var t=document.createElement("style"),e=this.getStyleText();t.innerHTML=e,t.id="zol-app-style",document.head.appendChild(t);var o=+new Date;q.start<=o&&o<=q.end&&this.initPicBanner(q)}}},{key:"initPicBanner",value:function(t){var e=this,o=document.createElement("div");o.classList.add("mtb-".concat(this.radomClassName,"__box--banner"));var n=t.target||"_self",a=t.ad?"<i>广告</i>":"",i='<a class="mtb-'.concat(this.radomClassName,'__banner" href="').concat(t.link,'" target="').concat(n,'"><img src="').concat(t.src,'">').concat(a,"</a>");o.innerHTML=i,this.options&&this.options.selector&&""!==this.options.selector&&(L.appBarOuterElement=document.querySelector(this.options.selector)),L.appBarOuterElement?L.appBarOuterElement.appendChild(o):document.body.insertBefore(o,document.body.firstElementChild),window.setTimeout(function(){e.options&&e.options.initCallback&&"function"==typeof e.options.initCallback&&e.options.initCallback()},50)}},{key:"getSyncData",value:function(){var t=[];return window.readListJson&&window.readListJson.length&&(t=t.concat(this.createItem(window.readListJson))),window.topAppSecondFocus&&window.topAppSecondFocus.length&&(t=t.concat(this.createItem(window.topAppSecondFocus))),window.topAppThirdFocus&&window.topAppThirdFocus.length&&(t=t.concat(this.createItem(window.topAppThirdFocus))),t}},{key:"getAsyncMsiteData",value:function(t,e){var o=this,n=[];t?a({type:"GET",url:t,dataType:"json",success:function(t){t.state&&(t.secondFocusData||t.thirdFocusData?(t.secondFocusData&&(n=n.concat(o.createItem(t.secondFocusData))),t.thirdFocusData&&(n=n.concat(o.createItem(t.thirdFocusData)))):t.data&&(window.media_data_change=!0,n=n.concat(o.createItem(t.data)))),"function"==typeof e&&e(n)},error:function(){"function"==typeof e&&e(n)}}):"function"==typeof e&&e(n)}},{key:"getAsyncTuanData",value:function(t,e){var o=this,n="";a({type:"GET",url:t,dataType:"jsonp",jsonp:"appFloatDownData",cache:!0,data:{manuId:L.manuId,imgSize:"100x100"},success:function(t){if(!parseInt(t.status,10)){if(o.isTuanFirst=!0,"1"===t.data.proType)parseInt(t.data.oriPrice,10)<=parseInt(t.data.curPrice,10)&&(o.isTuanFirst=!1);n=o.createTuanItem(t.data)}"function"==typeof e&&e(n)},error:function(){"function"==typeof e&&e(n)}})}},{key:"initTopBanner",value:function(){var o=this,n=document.createElement("div");n.classList.add("mtb-".concat(this.radomClassName,"__box"));var a=[],t=['<div class="mtb-'.concat(this.radomClassName,'__item"><a data-position="top" href="javascript:void(0)">'),'<figure class="mtb-'.concat(this.radomClassName,'__logo">'),'<img src="//icon.zol-img.com.cn/m/images/app/logo-opacity.png">','</figure><div class="mtb-'.concat(this.radomClassName,'__text">'),'<span class="mtb-'.concat(this.radomClassName,'__text--main">').concat(L.topMainText,"</span>"),'<span class="mtb-'.concat(this.radomClassName,'__text--sub">').concat(L.topSubText,"</span>"),'</div><em class="mtb-'.concat(this.radomClassName,'__btn">下载客户端</em></a></div>')].join("");a.push(t),this.getAsyncTuanData("//dynamic.zol.com.cn/channel/?c=Active_RecommendTag",function(t){""!==t&&a.unshift(t),o.getAsyncMsiteData(window.topDownLoadApp,function(t){a=a.concat(t);var e=o.getSyncData();a=a.concat(e),o.createTopLayoutAndBindEvent(n,a)})})}},{key:"initItemEvent",value:function(i){var c=this;i.addEventListener("click",function(t){t.preventDefault();var e="zolapp://m.zol.com.cn/help.html",o=(-1<i.href.indexOf("javascript:")?"":i.href)||e;0!==o.indexOf("http:")&&0!==o.indexOf("https:")||(o=e);var n=i.getAttribute("data-position"),a="zolapp-".concat(n,"-click");c.statistics(a,{clickurl:encodeURIComponent(o)}),H.open({scheme:o})})}},{key:"createTuanItem",value:function(t){var e=[];if(!t||""===t)return e;var o=!0,n=+new Date("2019/07/01 09:30:00"),a=+new Date("2019/07/03 11:59:59"),i=+new Date,c=t.pic,s="zolapp://newscontent.web/".concat(window.encodeURIComponent(t.url));n<=i&&i<=a&&(s="zolapp://newscontent.native.news/7172825/5//0/0");var r="",l="";if("1"===t.proType){var p=parseInt(t.oriPrice,10),d=parseInt(t.curPrice,10);if(d<p)r="立减".concat(p-d,"元"),l="限时抢购</span>";else o=!1}else"2"===t.proType&&(r="0元新品试用",l="<span>限时</span>",n<=i&&i<=a&&(r="限时福利"));return o&&e.push(['<div class="mtb-'.concat(this.radomClassName,'__item"><a href="').concat(s,'" data-position="top">'),'<figure class="mtb-'.concat(this.radomClassName,'__pic">'),'<img src="'.concat(c&&""!==c?c:"//icon.zol-img.com.cn/m/images/app/logo-opacity.png",'">'),'</figure><div class="mtb-'.concat(this.radomClassName,'__text">'),'<div class="mtb-'.concat(this.radomClassName,'__text--main">').concat(t.proName,"</div>"),'<div class="mtb-'.concat(this.radomClassName,'__text--price"><strong>').concat(r,"</strong>").concat(l,"</div>"),'</div><em class="mtb-'.concat(this.radomClassName,'__btn">下载APP参与</em>'),"</a></div>"].join("")),e}},{key:"createItem",value:function(t){var e=[];if(t&&t.length){var o=t.length,n=t[1<o?Math.round(Math.random()*(o-1)):0],a=n.dpic||n.picStr,i=n.url&&""!==n.url?n.url:"javascript:void(0)";e.push(['<div class="mtb-'.concat(this.radomClassName,'__item"><a data-position="top" href="').concat(i,'">'),'<figure class="mtb-'.concat(this.radomClassName,'__pic">'),'<img src="'.concat(a&&""!==a?a:"//icon.zol-img.com.cn/m/images/app/logo-opacity.png",'">'),'</figure><div class="mtb-'.concat(this.radomClassName,'__text"><p>').concat(n.title,"</p></div>"),'<em class="mtb-'.concat(this.radomClassName,'__btn">下载客户端</em>'),"</a></div>"].join(""))}return e}},{key:"createTopLayoutAndBindEvent",value:function(t,e){var o=this,n='{{ITEM_HTML}}<span class="mtb-'.concat(this.radomClassName,'__close"><i>关闭</i></span>'),a=Math.floor(Math.random()*e.length);this.isTuanFirst&&(a=0),n=n.replace("{{ITEM_HTML}}",e[a]),t.innerHTML=n,this.options&&this.options.selector&&""!==this.options.selector&&(L.appBarOuterElement=document.querySelector(this.options.selector)),L.appBarOuterElement?L.appBarOuterElement.appendChild(t):document.body.insertBefore(t,document.body.firstElementChild),window.setTimeout(function(){o.options&&o.options.initCallback&&"function"==typeof o.options.initCallback&&o.options.initCallback()},50);var i=t.querySelectorAll(".mtb-".concat(this.radomClassName,"__item a"));Array.prototype.forEach.call(i,function(t){o.initItemEvent(t)}),t.querySelector(".mtb-".concat(this.radomClassName,"__close")).addEventListener("click",function(){o.close({ele:t,statistics:"zolapp-close",localStorage:"zol-app-closed",callback:o.options&&o.options.closeCallback})})}},{key:"close",value:function(t){t.statistics&&this.statistics(t.statistics),t.ele&&t.ele.remove();t.localStorage&&(M.setItem(t.localStorage,"1",43200),"function"==typeof t.callback&&t.callback())}},{key:"statistics",value:function(t,e){var o="".concat(L.site,"-").concat(t,"-").concat(L.platform);if("wap"===L.site){var n="";void 0!==window.subPageType?n=window.subPageType:void 0!==window.pageType?n=window.pageType:void 0!==window.__PRO__.pageType&&(n=window.__PRO__.pageType),""!==n&&(o+="-".concat(n))}i.countWithParams(o,e)}},{key:"getStyleText",value:function(){var t=this.radomClassName;return["".concat(L.selector," {background: none!important}"),"".concat(L.selector," div {background-color: transparent!important}"),".mtb-".concat(t,"__box {position:relative; width: 100%; height:50px; overflow: hidden; background: #E4EDF5!important; background: -webkit-gradient(linear, left top, left bottom, from(#E4EDF5),to(#F5F5F5))!important; background: -webkit-linear-gradient(top, #E4EDF5,#F5F5F5)!important; background: linear-gradient(to bottom, #E4EDF5,#F5F5F5)!important; font-family: Helvetica Neue,Helvetica,Arial,PingFang SC,Hiragino Sans GB,Heiti SC,Microsoft YaHei,WenQuanYi Micro Hei,sans-serif}"),".mtb-".concat(t,"__item a {position: relative; display: block; padding: 5px 134px 5px 60px; box-sizing: border-box; height: 50px; overflow:hidden; color: #222; font-size: 14px; text-decoration: none}"),".mtb-".concat(t,"__logo, .mtb-").concat(t,"__pic {position: absolute; left: 10px; top: 5px; width: 40px; height: 40px; overflow: hidden; margin: 0; padding: 0; background: #fff; box-sizing: border-box}"),".mtb-".concat(t,"__logo img {display: block; width: 100%; height: 100%; box-sizing: border-box}"),".mtb-".concat(t,"__pic img {position: absolute; left: 0; top: 50%; width: 100%; -webkit-transform: translateY(-50%); transform: translateY(-50%);}"),".mtb-".concat(t,"__logo {padding: 5px; border-radius: 5px;}"),".mtb-".concat(t,"__text {margin: 0; margin: 2px 0; padding: 0 10px 0 0; height: 36px; line-height: 18px; color: #222; font-size: 14px; overflow: hidden; word-break: break-all;}"),".mtb-".concat(t,"__text p {margin: 0; display: -webkit-box; text-overflow: ellipsis; -webkit-line-clamp: 2; -webkit-box-orient: vertical; white-space: normal; font-size: 14px}"),".mtb-".concat(t,"__text--main, .mtb-").concat(t,"__text--sub, .mtb-").concat(t,"__text--price {display: block; height: 18px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis}"),".mtb-".concat(t,"__text--price strong {float: left; margin-right: 5px; color: #eb5f2c}"),".mtb-".concat(t,"__text--price span {float: left; padding: 0 6px 0 4px; border: 1px solid #eb5f2c; font-size: 10px; color: #eb5f2c; font-size: 10px; margin-top: 2px; height: 14px; line-height: 14px; border-radius: 9px; font-style: italic}"),".mtb-".concat(t,"__btn {position: absolute; right: 44px; top: 10px; height: 30px; width: 90px; line-height: 30px; font-size: 13px; color: #fff; border-radius: 30px; text-align: center; font-style: normal; background: #4a92f7; background: -webkit-linear-gradient(left, #4a92f7 0%, #3b84f4 100%); background: linear-gradient(to right, #4a92f7 0%, #3b84f4 100%)}"),".mtb-".concat(t,"__close {position: absolute; right: 0; top: 0; z-index: 2; width: 40px; height: 100%;}"),".mtb-".concat(t,"__close i {display: block; width: 100%; height: 100%; position: relative; font-size: 0; -webkit-transform: rotate(45deg); transform: rotate(45deg)}"),".mtb-".concat(t,"__close i::before, .mtb-").concat(t,"__close i::after {content: ''; position: absolute; background-color: #aaa; -webkit-transform: translate(-50%, -50%); transform: translate(-50%,-50%); top: 50%; left: 50%}"),".mtb-".concat(t,"__close i::before {height: 20px; width: 1px; bottom: 7px; right: 12px}"),".mtb-".concat(t,"__close i::after {height: 1px; width: 20px}"),".mtb-".concat(t,"__box--banner {position: relative; width: 100%; overflow: hidden; background: #E4EDF5!important;}"),".mtb-".concat(t,"__banner img {display:block; width: 100%; overflow: hidden}"),".mtb-".concat(t,"__banner i {position:absolute; left: 0; bottom: 0; height: 16px; font-size: 10px; padding: 0 5px; line-height: 16px; background: rgba(0,0,0,.5);color:#fff!important; font-style:normal}")].join("")}}]),e}());window.ZOL_APPBAR_INIT||(L.isNotAutoLoad?window.AppBar={init:function(t){U.init(t)}}:L.isForBms?U.init():document.addEventListener("DOMContentLoaded",function(){U.init()}))});
